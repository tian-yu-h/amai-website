---
import contactIconRaw from "../../assets/icons/contact-icon.svg?raw";
import linkedinIconRaw from "../../assets/icons/linkedin-blog-post-shareicon.svg?raw";
import Button from "../ui/button/Button.astro";

function sanitizeToWhite(svg: string, size = 18) {
  let s = svg
    .replace(/<\?xml[\s\S]*?\?>/g, "")
    .replace(/<!--([\s\S]*?)-->/g, "")
    .replace(/width=\"[^\"]*\"/g, "")
    .replace(/height=\"[^\"]*\"/g, "")
    .replace(/fill=\"[^\"]*\"/gi, 'fill="currentColor"')
    .replace(/stroke=\"[^\"]*\"/gi, 'stroke="none"');
  s = s.replace(/<svg([^>]*)>/, (m, attrs) => `<svg${attrs} width="${size}" height="${size}">`);
  return s;
}

const contactIcon = sanitizeToWhite(contactIconRaw);
const linkedinIcon = sanitizeToWhite(linkedinIconRaw);
const year = new Date().getFullYear();

// Update these (placeholders are fine for now)
const linkedinUrl = "https://www.linkedin.com/in/tianyu1037/";
const email = "tian.yu.hank@gmail.com";
---

<footer id="contact" class="py-12 px-4 text-center">
  <h2 class="text-2xl md:text-3xl font-semibold text-foreground">
    Let's discuss your next project
  </h2>

  <p class="mt-2 text-[color:var(--color-text-muted)] max-w-2xl mx-auto">
    Share your goal, timeline, and what data you have (sensory, consumer, reviews, or physiological).
    I'll respond with suggested next steps and a clear scope. No obligations.
  </p>

  <!-- Contact Button -->
    <Button href={`mailto:tian.yu.hank@gmail.com`} variant="secondary" size="md">
      <span class="inline-flex mr-2" aria-hidden="true" set:html={contactIcon} />
      Contact
    </Button> 

    <!-- LinkedIn Button (Now styled exactly like Contact) -->
    <Button href={linkedinUrl} variant="secondary" size="md" target="_blank" rel="noopener noreferrer">
      <span class="inline-flex mr-2" aria-hidden="true" set:html={linkedinIcon} />
      LinkedIn
    </Button>
    
  </div>

  <div class="mt-8 text-sm text-[color:var(--color-text-muted)]">
    {year} Amai Consulting LLC. All rights reserved.

  </div>
</footer>
